<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì§„ë‹¨ ê²°ê³¼ ë³´ê¸° | ì²¨ë‹¨ì¬ìƒì˜ë£Œ ì¸í—ˆê°€ ì»¨ì„¤íŒ…</title>
    <meta name="description" content="ì¬ìƒì˜ë£Œ ë¹„ì¦ˆë‹ˆìŠ¤ ì„±ê³µ ê°€ëŠ¥ì„± ì •ë°€ ì§„ë‹¨ ê²°ê³¼ ìƒ˜í”Œì„ í™•ì¸í•˜ì„¸ìš”.">
    <link rel="stylesheet" href="../style.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        /* ===== ë¦¬í¬íŠ¸ ì „ìš© í”„ë¦¬ë¯¸ì—„ ìŠ¤íƒ€ì¼ ===== */
        .report-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* ë¦¬í¬íŠ¸ ë˜í¼ - ì¢…ì´ ëŠë‚Œ */
        .report-paper {
            background: #fff;
            border-radius: 24px;
            box-shadow: 0 4px 40px rgba(0,0,0,0.06), 0 1px 3px rgba(0,0,0,0.04);
            padding: 48px 48px 56px;
            margin-top: -60px;
            position: relative;
            z-index: 2;
        }
        @media (max-width: 768px) {
            .report-paper { padding: 28px 20px 36px; margin-top: -40px; }
        }

        /* ë¦¬í¬íŠ¸ ìƒë‹¨ í—¤ë” */
        .report-top-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 2px solid #F0F2F5;
        }
        .report-logo-area {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .report-logo-icon {
            width: 44px; height: 44px;
            background: linear-gradient(135deg, #004DA6, #0073E6);
            border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            font-size: 22px;
        }
        .report-logo-text {
            font-size: 14px; font-weight: 800; color: #1F2937;
            line-height: 1.3;
        }
        .report-logo-text span { color: #004DA6; }
        .report-meta {
            text-align: right;
            font-size: 13px; color: #6B7280;
        }
        .report-meta .report-id {
            font-size: 11px;
            font-weight: 700;
            color: #004DA6;
            background: #EEF2FF;
            padding: 4px 10px;
            border-radius: 20px;
            display: inline-block;
            margin-bottom: 4px;
        }

        /* ìƒ˜í”Œ ë°°ë„ˆ */
        .sample-banner {
            text-align: center;
            padding: 18px 24px;
            margin-bottom: 36px;
            background: linear-gradient(135deg, #EEF2FF 0%, #F0FDF4 100%);
            border: 2px dashed #004DA6;
            border-radius: 16px;
        }
        .sample-banner p {
            color: #004DA6;
            font-weight: 700;
            font-size: 15px;
            margin: 0;
        }
        .sample-banner a { color: #008F72; text-decoration: underline; font-weight: 800; }

        /* ì‹ ì²­ì ì •ë³´ ì¹´ë“œ */
        .applicant-card {
            background: linear-gradient(135deg, #F8FAFF 0%, #F0F9F4 100%);
            border: 1px solid #E0E7F1;
            border-radius: 20px;
            padding: 28px 32px;
            margin-bottom: 36px;
        }
        .applicant-card-title {
            font-size: 13px;
            font-weight: 800;
            color: #004DA6;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-bottom: 18px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .applicant-card-title::before {
            content: '';
            width: 4px; height: 16px;
            background: linear-gradient(180deg, #004DA6, #0073E6);
            border-radius: 2px;
        }
        .applicant-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }
        @media (max-width: 768px) {
            .applicant-grid { grid-template-columns: repeat(2, 1fr); }
        }
        @media (max-width: 480px) {
            .applicant-grid { grid-template-columns: 1fr; }
        }
        .applicant-item {
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(4px);
            border-radius: 12px;
            padding: 14px 18px;
            border: 1px solid rgba(0,0,0,0.04);
        }
        .applicant-item .ai-label {
            font-size: 10px;
            font-weight: 700;
            color: #9CA3AF;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            margin-bottom: 4px;
        }
        .applicant-item .ai-value {
            font-size: 14px;
            font-weight: 700;
            color: #1F2937;
        }
        .applicant-note {
            margin-top: 14px;
            padding: 16px 20px;
            background: rgba(255,255,255,0.9);
            border-radius: 12px;
            border: 1px solid rgba(0,0,0,0.04);
        }
        .applicant-note .ai-label {
            font-size: 10px; font-weight: 700; color: #9CA3AF;
            text-transform: uppercase; letter-spacing: 0.8px; margin-bottom: 6px;
        }
        .applicant-note .ai-value {
            font-size: 13.5px; color: #374151; line-height: 1.7;
        }

        /* === ì´ì  ì„¹ì…˜ === */
        .score-hero {
            text-align: center;
            padding: 48px 20px 40px;
            margin-bottom: 40px;
            background: linear-gradient(180deg, #FAFBFF 0%, #fff 100%);
            border-radius: 20px;
            border: 1px solid #F0F2F5;
        }
        .score-hero-label {
            font-size: 12px;
            font-weight: 800;
            color: #6B7280;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 24px;
        }
        .score-circle-wrap {
            position: relative;
            width: 180px; height: 180px;
            margin: 0 auto 24px;
        }
        .score-circle-wrap svg {
            width: 100%; height: 100%;
        }
        .score-circle-wrap .score-number {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }
        .score-circle-wrap .score-number .num {
            font-size: 48px;
            font-weight: 900;
            color: #1F2937;
            line-height: 1;
        }
        .score-circle-wrap .score-number .unit {
            font-size: 14px;
            font-weight: 600;
            color: #9CA3AF;
            display: block;
            margin-top: 4px;
        }
        .grade-pill {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 24px;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 800;
            margin-bottom: 16px;
        }
        .grade-pill.grade-a { background: #ECFDF5; color: #059669; }
        .grade-pill.grade-b { background: #FFFBEB; color: #D97706; }
        .grade-pill.grade-c { background: #FEF2F2; color: #DC2626; }
        .grade-pill .grade-letter {
            width: 32px; height: 32px;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 18px; font-weight: 900; color: #fff;
        }
        .grade-pill.grade-a .grade-letter { background: #059669; }
        .grade-pill.grade-b .grade-letter { background: #D97706; }
        .grade-pill.grade-c .grade-letter { background: #DC2626; }
        .score-summary {
            font-size: 15px;
            color: #6B7280;
            line-height: 1.7;
            max-width: 520px;
            margin: 0 auto;
        }

        /* === ë ˆì´ë” ì°¨íŠ¸ === */
        .radar-section {
            margin-bottom: 48px;
        }
        .section-title-bar {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid #F0F2F5;
        }
        .section-title-bar .icon {
            width: 36px; height: 36px;
            border-radius: 10px;
            display: flex; align-items: center; justify-content: center;
            font-size: 18px;
        }
        .section-title-bar h3 {
            font-size: 18px;
            font-weight: 800;
            color: #1F2937;
            margin: 0;
        }
        .radar-chart-container {
            background: #FAFBFF;
            border: 1px solid #F0F2F5;
            border-radius: 20px;
            padding: 32px 20px 24px;
            text-align: center;
        }
        .radar-chart-container svg {
            max-width: 420px;
            width: 100%;
            height: auto;
        }
        .radar-legend {
            display: flex;
            justify-content: center;
            gap: 24px;
            margin-top: 16px;
        }
        .radar-legend-item {
            display: flex; align-items: center; gap: 6px;
            font-size: 12px; font-weight: 600; color: #6B7280;
        }
        .legend-dot {
            width: 10px; height: 10px; border-radius: 50%;
        }

        /* === íŒŒíŠ¸ë³„ ë¶„ì„ ì¹´ë“œ === */
        .parts-section {
            margin-bottom: 48px;
        }
        .part-card {
            background: #fff;
            border: 1px solid #F0F2F5;
            border-radius: 20px;
            padding: 32px;
            margin-bottom: 20px;
            transition: box-shadow 0.3s ease;
        }
        .part-card:hover {
            box-shadow: 0 8px 30px rgba(0,0,0,0.06);
        }
        .part-card-header {
            display: flex;
            align-items: center;
            gap: 14px;
            margin-bottom: 20px;
        }
        .part-icon-box {
            width: 48px; height: 48px;
            border-radius: 14px;
            display: flex; align-items: center; justify-content: center;
            font-size: 22px;
            flex-shrink: 0;
        }
        .part-icon-box.p1 { background: linear-gradient(135deg, #EEF2FF, #E0E7FF); }
        .part-icon-box.p2 { background: linear-gradient(135deg, #FEF3C7, #FDE68A); }
        .part-icon-box.p3 { background: linear-gradient(135deg, #ECFDF5, #D1FAE5); }
        .part-card-header h3 {
            font-size: 16px; font-weight: 800; color: #1F2937; margin: 0;
        }
        .part-card-header .part-label {
            font-size: 11px; font-weight: 700; color: #9CA3AF;
            text-transform: uppercase; letter-spacing: 1px;
        }

        /* ì ìˆ˜ ë°” - 5ë‹¨ê³„ ì„¸ê·¸ë¨¼íŠ¸ */
        .part-score-row {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
        }
        .seg-bar {
            flex: 1;
            display: flex;
            gap: 3px;
            height: 14px;
        }
        .seg-bar .seg {
            flex: 1;
            background: #F3F4F6;
            border-radius: 4px;
            overflow: hidden;
            position: relative;
        }
        .seg-bar .seg-fill {
            height: 100%;
            width: 0%;
            border-radius: 4px;
            transition: width 1s cubic-bezier(0.4,0,0.2,1);
        }
        .seg-bar .seg-label {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-size: 8px;
            font-weight: 800;
            color: rgba(0,0,0,0.2);
            pointer-events: none;
        }
        .part-score-value {
            font-size: 16px;
            font-weight: 900;
            color: #1F2937;
            min-width: 60px;
            text-align: right;
        }
        .part-comment {
            font-size: 14px;
            color: #6B7280;
            line-height: 1.6;
            margin-bottom: 0;
        }

        /* ì „ë¬¸ê°€ í”¼ë“œë°± */
        .expert-feedback { margin-top: 20px; }
        .feedback-box {
            background: #FAFBFF;
            border-radius: 16px;
            padding: 24px 28px;
            margin-top: 8px;
            border-left: 4px solid #ccc;
        }
        .feedback-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 16px;
        }
        .feedback-badge {
            font-size: 11px;
            font-weight: 800;
            padding: 4px 12px;
            border-radius: 20px;
            color: #fff;
        }
        .feedback-title {
            font-size: 14px;
            font-weight: 800;
            margin: 0;
        }
        .feedback-list {
            list-style: none;
            padding: 0;
            margin: 0 0 18px 0;
        }
        .feedback-list li {
            position: relative;
            padding: 7px 0 7px 24px;
            font-size: 13.5px;
            line-height: 1.75;
            color: #374151;
        }
        .feedback-list li::before {
            content: '';
            position: absolute;
            left: 4px;
            top: 15px;
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }
        .feedback-action {
            background: #fff;
            border-radius: 12px;
            padding: 18px 20px;
            font-size: 13.5px;
            line-height: 1.75;
            color: #1F2937;
            border: 1px solid #E5E7EB;
            display: flex;
            gap: 8px;
        }
        .feedback-action-icon {
            flex-shrink: 0;
            width: 20px;
            font-size: 14px;
            padding-top: 2px;
        }
        .feedback-action strong { color: #004DA6; }

        /* === CTA ë²„íŠ¼ ì˜ì—­ === */
        .report-cta {
            display: flex;
            gap: 16px;
            justify-content: center;
            margin-top: 48px;
            padding-top: 36px;
            border-top: 2px solid #F0F2F5;
        }
        .report-cta a {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 14px 32px;
            border-radius: 14px;
            font-size: 15px;
            font-weight: 700;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        .btn-retry {
            background: #F3F4F6;
            color: #374151;
        }
        .btn-retry:hover { background: #E5E7EB; }
        .btn-consult {
            background: linear-gradient(135deg, #004DA6, #0073E6);
            color: #fff;
            box-shadow: 0 4px 14px rgba(0,77,166,0.25);
        }
        .btn-consult:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,77,166,0.3);
        }
        @media (max-width: 480px) {
            .report-cta { flex-direction: column; }
            .report-cta a { justify-content: center; }
        }

        /* í•˜ë‹¨ ì›Œí„°ë§ˆí¬ */
        .report-watermark {
            text-align: center;
            margin-top: 32px;
            font-size: 11px;
            color: #D1D5DB;
            letter-spacing: 1px;
        }

        /* ë¦¬í¬íŠ¸ ì˜ì—­ í•˜ë‹¨ ì—¬ë°± */
        .report-outer-section {
            padding: 0 0 80px;
            background: #F6F7FB;
        }
    </style>
</head>
<body>
    <!-- í—¤ë” -->
    <header class="header" id="header">
        <div class="header-container">
            <a href="../index.html" class="logo">
                <span class="logo-icon">ğŸ§¬</span>
                <span class="logo-text">RegenMed<span class="logo-highlight">Consulting</span></span>
            </a>
            <nav class="nav">
                <a href="why-us.html" class="nav-link">ì™œ ìš°ë¦¬ì¸ê°€</a>
                <div class="nav-dropdown">
                    <a href="services.html" class="nav-link">ì„œë¹„ìŠ¤ <span class="nav-arrow">â–¾</span></a>
                    <div class="nav-dropdown-menu">
                        <a href="services.html" class="dropdown-link">ì„œë¹„ìŠ¤ ì†Œê°œ</a>
                        <a href="diagnosis.html" class="dropdown-link">ë¹„ì¦ˆë‹ˆìŠ¤ ì§„ë‹¨</a>
                        <a href="results.html" class="dropdown-link active">ì§„ë‹¨ ê²°ê³¼ ë³´ê¸°</a>
                    </div>
                </div>
                <div class="nav-dropdown">
                    <a href="nkcl.html" class="nav-link">íŒŒíŠ¸ë„ˆ <span class="nav-arrow">â–¾</span></a>
                    <div class="nav-dropdown-menu">
                        <a href="nkcl.html" class="dropdown-link">NKCL Bio Group</a>
                        <a href="exvar.html" class="dropdown-link">ExVAR ì…€í…Œë¼í”¼</a>
                    </div>
                </div>
                <a href="process.html" class="nav-link">í”„ë¡œì„¸ìŠ¤</a>
                <a href="expertise.html" class="nav-link">ì „ë¬¸ë¶„ì•¼</a>
                <a href="requirements.html" class="nav-link">ì‹œì„¤ìš”ê±´</a>
                <a href="results.html" class="nav-link nav-cta">ì§„ë‹¨ ê²°ê³¼ ë³´ê¸°</a>
            </nav>
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </header>

    <!-- ëª¨ë°”ì¼ ë©”ë‰´ -->
    <div class="mobile-menu" id="mobileMenu">
        <a href="why-us.html" class="mobile-nav-link">ì™œ ìš°ë¦¬ì¸ê°€</a>
        <a href="services.html" class="mobile-nav-link">ì„œë¹„ìŠ¤</a>
        <a href="diagnosis.html" class="mobile-nav-link mobile-sub-link">â†³ ë¹„ì¦ˆë‹ˆìŠ¤ ì§„ë‹¨</a>
        <a href="results.html" class="mobile-nav-link mobile-sub-link">â†³ ì§„ë‹¨ ê²°ê³¼ ë³´ê¸°</a>
        <a href="nkcl.html" class="mobile-nav-link">íŒŒíŠ¸ë„ˆ</a>
        <a href="nkcl.html" class="mobile-nav-link mobile-sub-link">â†³ NKCL Bio Group</a>
        <a href="exvar.html" class="mobile-nav-link mobile-sub-link">â†³ ExVAR ì…€í…Œë¼í”¼</a>
        <a href="process.html" class="mobile-nav-link">í”„ë¡œì„¸ìŠ¤</a>
        <a href="expertise.html" class="mobile-nav-link">ì „ë¬¸ë¶„ì•¼</a>
        <a href="requirements.html" class="mobile-nav-link">ì‹œì„¤ìš”ê±´</a>
        <a href="results.html" class="mobile-nav-link nav-cta-mobile">ì§„ë‹¨ ê²°ê³¼ ë³´ê¸°</a>
    </div>

    <!-- í˜ì´ì§€ íˆì–´ë¡œ -->
    <section class="page-hero diagnosis-hero">
        <div class="hero-bg">
            <div class="hero-gradient"></div>
            <div class="hero-pattern"></div>
        </div>
        <div class="page-hero-content">
            <span class="section-badge">02-2. Diagnosis Results</span>
            <h1 class="page-hero-title">ì§„ë‹¨ ê²°ê³¼ ìƒ˜í”Œ</h1>
            <p class="page-hero-desc">AI ë¶„ì„ ë¦¬í¬íŠ¸ê°€ ì´ë ‡ê²Œ ì œê³µë©ë‹ˆë‹¤</p>
        </div>
    </section>

    <!-- ë¦¬í¬íŠ¸ ì˜ì—­ -->
    <section class="report-outer-section">
        <div class="report-container">
            <div class="report-paper">

                <!-- ë¦¬í¬íŠ¸ ìƒë‹¨ ë¡œê³ /ë©”íƒ€ -->
                <div class="report-top-header">
                    <div class="report-logo-area">
                        <div class="report-logo-icon">ğŸ§¬</div>
                        <div class="report-logo-text">RegenMed <span>Consulting</span><br><small style="font-size:10px;color:#9CA3AF;font-weight:500;">AI Business Diagnosis Report</small></div>
                    </div>
                    <div class="report-meta">
                        <div class="report-id" id="reportId">SAMPLE</div>
                        <div id="resultDate" style="margin-top:4px;"></div>
                    </div>
                </div>

                <!-- ìƒ˜í”Œ ì•ˆë‚´ ë°°ë„ˆ -->
                <div class="sample-banner" id="sampleBanner">
                    <p>ì•„ë˜ëŠ” ìƒ˜í”Œ ì§„ë‹¨ ê²°ê³¼ì…ë‹ˆë‹¤. ì‹¤ì œ ì§„ë‹¨ì„ ì›í•˜ì‹œë©´ <a href="diagnosis.html">ë¹„ì¦ˆë‹ˆìŠ¤ ì§„ë‹¨</a>ì„ ì§„í–‰í•´ ì£¼ì„¸ìš”.</p>
                </div>

                <!-- ì‹ ì²­ì ì •ë³´ -->
                <div class="applicant-card" id="applicantInfo"></div>

                <!-- ì´ì  -->
                <div class="score-hero">
                    <div class="score-hero-label">Total Score</div>
                    <div class="score-circle-wrap">
                        <svg viewBox="0 0 180 180">
                            <defs>
                                <linearGradient id="scoreGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#004DA6"/>
                                    <stop offset="100%" style="stop-color:#0073E6"/>
                                </linearGradient>
                            </defs>
                            <circle cx="90" cy="90" r="78" fill="none" stroke="#F3F4F6" stroke-width="10"/>
                            <circle cx="90" cy="90" r="78" fill="none" stroke-width="10" stroke-linecap="round" id="scoreCirclePath"
                                    stroke-dasharray="490.088" stroke-dashoffset="490.088"
                                    transform="rotate(-90 90 90)"/>
                        </svg>
                        <div class="score-number">
                            <span class="num" id="totalScoreValue">0</span>
                            <span class="unit">/ 100</span>
                        </div>
                    </div>
                    <div id="resultGrade"></div>
                    <p class="score-summary" id="resultSummary"></p>
                </div>

                <!-- ë ˆì´ë” ì°¨íŠ¸ -->
                <div class="radar-section">
                    <div class="section-title-bar">
                        <div class="icon" style="background:linear-gradient(135deg,#EEF2FF,#E0E7FF);">ğŸ“Š</div>
                        <h3>ì˜ì—­ë³„ ì—­ëŸ‰ ë¶„ì„</h3>
                    </div>
                    <div class="radar-chart-container">
                        <svg id="radarChart" viewBox="0 0 400 380" xmlns="http://www.w3.org/2000/svg"></svg>
                        <div class="radar-legend">
                            <span class="radar-legend-item"><span class="legend-dot" style="background:#004DA6"></span>í˜„ì¬ ìˆ˜ì¤€</span>
                            <span class="radar-legend-item"><span class="legend-dot" style="background:#E2E8F0"></span>ë§Œì  ê¸°ì¤€</span>
                        </div>
                    </div>
                </div>

                <!-- íŒŒíŠ¸ë³„ ë¶„ì„ -->
                <div class="parts-section">
                    <div class="section-title-bar">
                        <div class="icon" style="background:linear-gradient(135deg,#FEF3C7,#FDE68A);">ğŸ“‹</div>
                        <h3>íŒŒíŠ¸ë³„ ìƒì„¸ ë¶„ì„</h3>
                    </div>

                    <div class="part-card">
                        <div class="part-card-header">
                            <div class="part-icon-box p1">ğŸ“</div>
                            <div>
                                <div class="part-label">Part 1</div>
                                <h3>ì…ì§€ ë¶„ì„ ë° ìˆ˜ìµì„±</h3>
                            </div>
                        </div>
                        <div class="part-score-row">
                            <div class="seg-bar" id="part1Bar"></div>
                            <span class="part-score-value" id="part1Score">0/50</span>
                        </div>
                        <p class="part-comment" id="part1Comment"></p>
                        <div class="expert-feedback" id="part1Feedback"></div>
                    </div>

                    <div class="part-card">
                        <div class="part-card-header">
                            <div class="part-icon-box p2">ğŸ—ï¸</div>
                            <div>
                                <div class="part-label">Part 2</div>
                                <h3>ì‹œì„¤ ì¸í—ˆê°€ ë° ì—”ì§€ë‹ˆì–´ë§</h3>
                            </div>
                        </div>
                        <div class="part-score-row">
                            <div class="seg-bar" id="part2Bar"></div>
                            <span class="part-score-value" id="part2Score">0/50</span>
                        </div>
                        <p class="part-comment" id="part2Comment"></p>
                        <div class="expert-feedback" id="part2Feedback"></div>
                    </div>

                    <div class="part-card">
                        <div class="part-card-header">
                            <div class="part-icon-box p3">ğŸ‘¥</div>
                            <div>
                                <div class="part-label">Part 3</div>
                                <h3>ìš´ì˜ ì „ëµ ë° íŒ€ë¹Œë”©</h3>
                            </div>
                        </div>
                        <div class="part-score-row">
                            <div class="seg-bar" id="part3Bar"></div>
                            <span class="part-score-value" id="part3Score">0/50</span>
                        </div>
                        <p class="part-comment" id="part3Comment"></p>
                        <div class="expert-feedback" id="part3Feedback"></div>
                    </div>
                </div>

                <!-- CTA -->
                <div class="report-cta">
                    <a href="diagnosis.html" class="btn-retry">ë‚˜ë„ ì§„ë‹¨ë°›ê¸°</a>
                    <a href="contact.html" class="btn-consult">
                        <span>ì „ë¬¸ê°€ ìƒë‹´ ì‹ ì²­</span>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                    </a>
                </div>

                <div class="report-watermark">REGENMED CONSULTING &middot; AI BUSINESS DIAGNOSIS REPORT</div>
            </div>
        </div>
    </section>

    <!-- CTA ì„¹ì…˜ -->
    <section class="cta-section">
        <div class="container">
            <div class="cta-content">
                <h2>ë‚˜ë„ ë¹„ì¦ˆë‹ˆìŠ¤ ì§„ë‹¨ì„ ë°›ì•„ë³´ê³  ì‹¶ë‹¤ë©´?</h2>
                <p>30ê°œ ë¬¸í•­ìœ¼ë¡œ ì…ì§€, ì‹œì„¤, ìš´ì˜ ì „ëµì„ AIê°€ ì •ë°€ ë¶„ì„í•©ë‹ˆë‹¤</p>
                <a href="diagnosis.html" class="btn btn-white">
                    <span>ë¹„ì¦ˆë‹ˆìŠ¤ ì§„ë‹¨ ì‹œì‘</span>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 12h14M12 5l7 7-7 7"/>
                    </svg>
                </a>
            </div>
        </div>
    </section>

    <!-- í‘¸í„° -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <a href="../index.html" class="logo">
                        <span class="logo-icon">ğŸ§¬</span>
                        <span class="logo-text">RegenMed<span class="logo-highlight">Consulting</span></span>
                    </a>
                    <p class="footer-desc">ì²¨ë‹¨ì¬ìƒì˜ë£Œ ì‹¤ì‹œê¸°ê´€ ì¸í—ˆê°€ ì „ë¬¸ ì»¨ì„¤íŒ…<br>ë³µì¡í•œ ì¸í—ˆê°€ ì ˆì°¨ë¥¼ ì‰½ê³  ë¹ ë¥´ê²Œ</p>
                </div>
                <div class="footer-links">
                    <h4>Quick Links</h4>
                    <a href="services.html">ì„œë¹„ìŠ¤</a>
                    <a href="diagnosis.html">ë¹„ì¦ˆë‹ˆìŠ¤ ì§„ë‹¨</a>
                    <a href="process.html">ì»¨ì„¤íŒ… í”„ë¡œì„¸ìŠ¤</a>
                    <a href="expertise.html">ì „ë¬¸ë¶„ì•¼</a>
                    <a href="contact.html">ë¬´ë£Œìƒë‹´</a>
                </div>
                <div class="footer-contact">
                    <h4>Contact</h4>
                    <p>ğŸ“ 010-1234-5678</p>
                    <p>ğŸ“§ consulting@regenmed.co.kr</p>
                    <p>ğŸ“ ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 RegenMed Consulting. All rights reserved.</p>
                <a href="admin.html" class="admin-footer-btn" title="ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ">&#9881; ê´€ë¦¬ì</a>
            </div>
        </div>
    </footer>

    <!-- ë§¨ ìœ„ë¡œ ë²„íŠ¼ -->
    <button class="back-to-top" id="backToTop">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 15l-6-6-6 6"/>
        </svg>
    </button>

    <script src="../js/supabase.js"></script>
    <script src="../script.js"></script>
    <script>
    (function() {
        var urlParams = new URLSearchParams(window.location.search);
        var recordId = urlParams.get('id');

        function renderPage(pct, scores, radarVals, userData, isRecord, displayId) {
            // ë ˆì½”ë“œ ëª¨ë“œì¼ ë•Œ ë°°ë„ˆ ìˆ¨ê¸°ê³  ë©”íƒ€ ë³€ê²½
            if (isRecord) {
                document.getElementById('sampleBanner').style.display = 'none';
                document.querySelector('.page-hero-title').textContent = 'ì§„ë‹¨ ê²°ê³¼ ë¦¬í¬íŠ¸';
                document.querySelector('.page-hero-desc').textContent = 'No. ' + String(displayId).padStart(4, '0') + ' â€” ' + (userData.name || '') + ' / ' + (userData.hospital || '');
                document.getElementById('reportId').textContent = 'No. ' + String(displayId).padStart(4, '0');
            }

            // ì‹ ì²­ì ì •ë³´
            (function(u) {
                if (!u) return;
                var html = '<div class="applicant-card-title">ì‹ ì²­ì ì •ë³´</div>';
                html += '<div class="applicant-grid">';
                var fields = [
                    { label: 'ì„±í•¨', value: u.name },
                    { label: 'ì§í•¨', value: u.position },
                    { label: 'ì—°ë½ì²˜', value: u.phone },
                    { label: 'ì´ë©”ì¼', value: u.email },
                    { label: 'ë³‘ì›/ê¸°ê´€ëª…', value: u.hospital },
                    { label: 'ì†Œì¬ì§€', value: u.location }
                ];
                fields.forEach(function(f) {
                    if (f.value) {
                        html += '<div class="applicant-item"><div class="ai-label">' + f.label + '</div><div class="ai-value">' + f.value + '</div></div>';
                    }
                });
                html += '</div>';
                if (u.note) {
                    html += '<div class="applicant-note"><div class="ai-label">ì¶”ê°€ ë¬¸ì˜ì‚¬í•­</div><div class="ai-value">' + u.note + '</div></div>';
                }
                document.getElementById('applicantInfo').innerHTML = html;
            })(userData);

            // ë‚ ì§œ
            var now = new Date();
            document.getElementById('resultDate').textContent =
                now.getFullYear() + '.' + String(now.getMonth()+1).padStart(2,'0') + '.' + String(now.getDate()).padStart(2,'0');

            // ì´ì  ì›í˜• ì• ë‹ˆë©”ì´ì…˜
            var circle = document.getElementById('scoreCirclePath');
            var circumference = 490.088;
            var offset = circumference - (pct / 100) * circumference;
            var color;
            if (pct >= 80) color = '#059669';
            else if (pct >= 60) color = '#D97706';
            else color = '#DC2626';

            circle.style.stroke = color;
            circle.style.transition = 'stroke-dashoffset 1.8s cubic-bezier(0.4, 0, 0.2, 1)';
            setTimeout(function() { circle.style.strokeDashoffset = offset; }, 200);

            // ìˆ«ì ì¹´ìš´íŠ¸ì—…
            var current = 0;
            var scoreEl = document.getElementById('totalScoreValue');
            var duration = 1800;
            var startTime = null;
            function animateScore(timestamp) {
                if (!startTime) startTime = timestamp;
                var progress = Math.min((timestamp - startTime) / duration, 1);
                var eased = 1 - Math.pow(1 - progress, 3);
                scoreEl.textContent = Math.round(eased * pct);
                if (progress < 1) requestAnimationFrame(animateScore);
            }
            requestAnimationFrame(animateScore);

            // ë“±ê¸‰
            var gradeEl = document.getElementById('resultGrade');
            var summaryEl = document.getElementById('resultSummary');
            if (pct >= 80) {
                gradeEl.innerHTML = '<span class="grade-pill grade-a"><span class="grade-letter">A</span>ì¦‰ì‹œ ì¶”ì§„ ê°€ëŠ¥</span>';
                summaryEl.textContent = 'ì¦‰ì‹œ ì¸í—ˆê°€ ì°©ìˆ˜ê°€ ê°€ëŠ¥í•˜ë©°, ìˆ˜ìµì„±ì´ ë§¤ìš° ë†’ì€ ê²ƒìœ¼ë¡œ ë¶„ì„ë©ë‹ˆë‹¤.';
            } else if (pct >= 60) {
                gradeEl.innerHTML = '<span class="grade-pill grade-b"><span class="grade-letter">B</span>ë³´ì™„ í›„ ì¶”ì§„ ê¶Œì¥</span>';
                summaryEl.textContent = 'ì‹œì„¤ ë° ìš´ì˜ ì „ëµì˜ ì¼ë¶€ ë³´ì™„ì´ í•„ìš”í•©ë‹ˆë‹¤. ì „ë¬¸ê°€ ìƒë‹´ì„ í†µí•´ ë¶€ì¡±í•œ ì˜ì—­ì„ íŒŒì•…í•˜ê³  ê°œì„  ë°©ì•ˆì„ ìˆ˜ë¦½í•˜ì„¸ìš”.';
            } else {
                gradeEl.innerHTML = '<span class="grade-pill grade-c"><span class="grade-letter">C</span>ì „ë©´ ì¬ê²€í†  í•„ìš”</span>';
                summaryEl.textContent = 'ì…ì§€ ì¬ê²€í†  í˜¹ì€ ì‹œì„¤/ì¸ë ¥ì— ëŒ€í•œ ëŒ€ëŒ€ì ì¸ êµ¬ì¡°ì¡°ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.';
            }

            // ì „ë¬¸ê°€ í”¼ë“œë°± ë°ì´í„°
            var expertFeedback = {
                p1: {
                    high: {
                        title: 'ìš°ìˆ˜', range: '40~50ì ', color: '#059669', bg: '#ECFDF5',
                        items: [
                            'ê³ ì†Œë“ íƒ€ê²Ÿ ê³ ê°ì¸µì´ í’ë¶€í•˜ì—¬ í”„ë¦¬ë¯¸ì—„ ì¬ìƒì˜ë£Œ ì‹œìˆ ì˜ ìˆ˜ìš”ê°€ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤.',
                            'êµí†µ ì¸í”„ë¼ì™€ ê¸€ë¡œë²Œ ì ‘ê·¼ì„±ì´ ìš°ìˆ˜í•´ ì™¸êµ­ì¸ í™˜ì ìœ ì¹˜ì— ìœ ë¦¬í•©ë‹ˆë‹¤.',
                            'ê²½ìŸì‚¬ ë°€ë„ê°€ ë‚®ì•„ ì„ ì  íš¨ê³¼ë¥¼ ê·¹ëŒ€í™”í•  ìˆ˜ ìˆëŠ” ìµœì ì˜ ì…ì§€ì…ë‹ˆë‹¤.',
                            'ê±´ë¬¼ ì™¸ê´€ê³¼ ì£¼ì°¨ í™˜ê²½ì´ VVIP í™˜ìì˜ ê¸°ëŒ€ ìˆ˜ì¤€ì— ë¶€í•©í•©ë‹ˆë‹¤.'
                        ],
                        action: 'í˜„ì¬ ì…ì§€ ì¡°ê±´ì„ ìµœëŒ€í•œ í™œìš©í•˜ì—¬ ì‹ ì†íˆ ì¸í—ˆê°€ë¥¼ ì¶”ì§„í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤. í”„ë¦¬ë¯¸ì—„ ë¸Œëœë”©ê³¼ í•¨ê»˜ ë¹ ë¥¸ ì‹œì¥ ì„ ì ì´ í•µì‹¬ì…ë‹ˆë‹¤.'
                    },
                    mid: {
                        title: 'ë³´í†µ', range: '30~39ì ', color: '#D97706', bg: '#FFFBEB',
                        items: [
                            'íƒ€ê²Ÿ ê³ ê°ì¸µì€ ì¡´ì¬í•˜ë‚˜, ì¸ê·¼ ê²½ìŸ ë³‘ì›ê³¼ì˜ ì°¨ë³„í™” ì „ëµì´ í•„ìš”í•©ë‹ˆë‹¤.',
                            'êµí†µ ì ‘ê·¼ì„± ë˜ëŠ” ì£¼ì°¨ í™˜ê²½ ì¤‘ ì¼ë¶€ ë³´ì™„ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                            'ì‹œìˆ  ë‹¨ê°€ì— ëŒ€í•œ ì§€ì—­ ê³ ê°ì˜ ìˆ˜ìš©ë„ë¥¼ ì‚¬ì „ ì¡°ì‚¬í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.',
                            'ë§ˆì¼€íŒ… í‚¤ì›Œë“œ ë¶„ì„ì„ í†µí•´ ì§€ì—­ ë‚´ ìˆ˜ìš” í¬í…ì…œì„ ì¬í™•ì¸í•˜ì„¸ìš”.'
                        ],
                        action: 'ì…ì§€ ë³´ì™„ í¬ì¸íŠ¸ë¥¼ íŒŒì•…í•œ í›„ ì¶”ì§„í•˜ë©´ ì¶©ë¶„íˆ ì„±ê³µ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì „ë¬¸ê°€ ìƒë‹´ì„ í†µí•´ ì•½ì ì„ ì „ëµì ìœ¼ë¡œ ë³´ì™„í•˜ì„¸ìš”.'
                    },
                    low: {
                        title: 'ë¯¸í¡', range: '10~29ì ', color: '#DC2626', bg: '#FEF2F2',
                        items: [
                            'í˜„ì¬ ì…ì§€ì˜ ê³ ê° ì†Œë“ ìˆ˜ì¤€ê³¼ ì¬ìƒì˜ë£Œ ìˆ˜ìš”ì¸µì˜ ë¶ˆì¼ì¹˜ê°€ ìš°ë ¤ë©ë‹ˆë‹¤.',
                            'êµí†µ ì¸í”„ë¼ ë¶€ì¡±ìœ¼ë¡œ ì™¸êµ­ì¸ í™˜ì ìœ ì¹˜ì— ìƒë‹¹í•œ ì œì•½ì´ ì˜ˆìƒë©ë‹ˆë‹¤.',
                            'ê²½ìŸì‚¬ ë°€ì§‘ ë˜ëŠ” ì‹œìˆ  ë‹¨ê°€ ì €í•­ì´ ìˆ˜ìµì„±ì„ í¬ê²Œ ì œí•œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                            'ì…ì§€ ì¬ê²€í†  ë˜ëŠ” íƒ€ê²Ÿ ì‹œì¥ ì „í™˜ì„ ê°•ë ¥íˆ ê¶Œê³ í•©ë‹ˆë‹¤.'
                        ],
                        action: 'í˜„ì¬ ì…ì§€ì—ì„œì˜ ì¶”ì§„ì€ ë¦¬ìŠ¤í¬ê°€ ë†’ìŠµë‹ˆë‹¤. ë°˜ë“œì‹œ ì „ë¬¸ê°€ì™€ í•¨ê»˜ ì…ì§€ ì¬ë¶„ì„ ë° ëŒ€ì•ˆ ê²€í† ë¥¼ ì§„í–‰í•˜ì„¸ìš”.'
                    }
                },
                p2: {
                    high: {
                        title: 'ìš°ìˆ˜', range: '40~50ì ', color: '#059669', bg: '#ECFDF5',
                        items: [
                            'ì¸µê³ , ê³µê°„ ê²©ë¦¬, ê³µì¡°ê¸° ì„¤ì¹˜ ê³µê°„ ë“± ë¬¼ë¦¬ì  ì¡°ê±´ì´ ì¶©ë¶„íˆ í™•ë³´ë˜ì–´ ìˆìŠµë‹ˆë‹¤.',
                            'ì „ë ¥ ìš©ëŸ‰ê³¼ ë°°ìˆ˜ ì‹œìŠ¤í…œì´ GMP ì‹œì„¤ ê¸°ì¤€ì„ ì¶©ì¡±í•©ë‹ˆë‹¤.',
                            'ë¹„ìƒ í†µë¡œ, ê°€ìŠ¤ ì•ˆì „, CCTV ë³´ì•ˆ ë“± ì•ˆì „ ìš”ê±´ì´ ì˜ ê°–ì¶°ì ¸ ìˆìŠµë‹ˆë‹¤.',
                            'íŒ¨ìŠ¤ë°•ìŠ¤ ì„¤ì¹˜ ë“± ì„¸í¬ì²˜ë¦¬ì‹¤ ìš´ì˜ì— í•„ìš”í•œ êµ¬ì¡°ì  ìš”ê±´ì´ ì¶©ì¡±ë©ë‹ˆë‹¤.'
                        ],
                        action: 'ì‹œì„¤ ì¡°ê±´ì´ ìš°ìˆ˜í•©ë‹ˆë‹¤. GMP ì„¤ê³„ ì°©ìˆ˜ì™€ í•¨ê»˜ ë°¸ë¦¬ë°ì´ì…˜ í”„ë¡œí† ì½œì„ ë³‘í–‰ ì§„í–‰í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.'
                    },
                    mid: {
                        title: 'ë³´í†µ', range: '30~39ì ', color: '#D97706', bg: '#FFFBEB',
                        items: [
                            'ê¸°ë³¸ì ì¸ ì‹œì„¤ êµ¬ì¡°ëŠ” ê°–ì¶”ê³  ìˆìœ¼ë‚˜, ì¼ë¶€ GMP ìš”ê±´ ë³´ì™„ì´ í•„ìš”í•©ë‹ˆë‹¤.',
                            'ê³µì¡° ì‹œìŠ¤í…œì´ë‚˜ ì „ë ¥ ìš©ëŸ‰ ì¦ì„¤ì— ëŒ€í•œ ì‚¬ì „ ê²€í† ê°€ í•„ìš”í•©ë‹ˆë‹¤.',
                            'í´ë¦°ë£¸ ë“±ê¸‰ì— ë§ëŠ” ë§ˆê°ì¬(ì—í­ì‹œ ë°”ë‹¥, ë¼ìš´ë”© ì½”ë¹™) ì‹œê³µ ê³„íšì„ ìˆ˜ë¦½í•˜ì„¸ìš”.',
                            'ë³´ì•ˆ ì‹œìŠ¤í…œê³¼ íŒ¨ìŠ¤ë°•ìŠ¤ ì„¤ì¹˜ ê°€ëŠ¥ ì—¬ë¶€ë¥¼ ê±´ì¶• ì „ë¬¸ê°€ì™€ í™•ì¸í•˜ì„¸ìš”.'
                        ],
                        action: 'ì‹œì„¤ ë³´ì™„ ë¹„ìš©ê³¼ ì¼ì •ì„ ì‚°ì •í•œ í›„ ì¶”ì§„í•˜ë©´ ì¶©ë¶„íˆ ì¸í—ˆê°€ í†µê³¼ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì„¤ê³„ ë‹¨ê³„ì—ì„œ ì „ë¬¸ ì»¨ì„¤íŒ…ì„ ë°›ìœ¼ì‹œê¸° ë°”ëë‹ˆë‹¤.'
                    },
                    low: {
                        title: 'ë¯¸í¡', range: '10~29ì ', color: '#DC2626', bg: '#FEF2F2',
                        items: [
                            'ì¸µê³  ë¶€ì¡±, ê³µê°„ ê²©ë¦¬ ë¶ˆê°€ ë“± êµ¬ì¡°ì  í•œê³„ê°€ ì‹¬ê°í•˜ì—¬ ëŒ€ê·œëª¨ ë¦¬ëª¨ë¸ë§ì´ í•„ìš”í•©ë‹ˆë‹¤.',
                            'ì „ë ¥, ë°°ìˆ˜, ê³µì¡° ë“± í•µì‹¬ ì¸í”„ë¼ê°€ ë¶€ì¡±í•˜ì—¬ ì¶”ê°€ ê³µì‚¬ ë¹„ìš©ì´ ìƒë‹¹í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                            'í˜„ì¬ ê±´ë¬¼ì—ì„œëŠ” GMP ì‹œì„¤ ê¸°ì¤€ ì¶©ì¡±ì´ ë§¤ìš° ì–´ë ¤ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                            'ì‹ ì¶• ë˜ëŠ” ë‹¤ë¥¸ ê±´ë¬¼ë¡œì˜ ì´ì „ì„ ì ê·¹ ê²€í† í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.'
                        ],
                        action: 'í˜„ì¬ ì‹œì„¤ë¡œëŠ” ì¸í—ˆê°€ í†µê³¼ê°€ ë§¤ìš° ì–´ë µìŠµë‹ˆë‹¤. ì‹ ì¶•/ì´ì „ì„ í¬í•¨í•œ ê·¼ë³¸ì  ëŒ€ì•ˆì„ ì „ë¬¸ê°€ì™€ í•¨ê»˜ ëª¨ìƒ‰í•˜ì„¸ìš”.'
                    }
                },
                p3: {
                    high: {
                        title: 'ìš°ìˆ˜', range: '40~50ì ', color: '#059669', bg: '#ECFDF5',
                        items: [
                            'í•„ìˆ˜ ì¸ë ¥(ì±…ì„ì˜ì‚¬, ì„¸í¬ê´€ë¦¬ì) í™•ë³´ì™€ íŒ€ë¹Œë”© ì²´ê³„ê°€ ì˜ ê°–ì¶°ì ¸ ìˆìŠµë‹ˆë‹¤.',
                            'ì›ì¥ì˜ ì¬ìƒì˜ë£Œ ë¹„ì „ì´ ëª…í™•í•˜ê³ , ì „ë¬¸ ì¸ë ¥ ê´€ë¦¬ ì‹œìŠ¤í…œì´ ìš´ì˜ë˜ê³  ìˆìŠµë‹ˆë‹¤.',
                            'AI ë§¤ë‰´ì–¼, SOP ë””ì§€í„¸í™” ë“± ìŠ¤ë§ˆíŠ¸ ìš´ì˜ ì²´ê³„ ë„ì… ì˜ì§€ê°€ ë†’ìŠµë‹ˆë‹¤.',
                            'ë¸Œëœë”© ì¼ê´€ì„±ê³¼ í™˜ì ì»¤ë®¤ë‹ˆí‹° êµ¬ì¶•ìœ¼ë¡œ ì§€ì† ê°€ëŠ¥í•œ ì„±ì¥ ê¸°ë°˜ì´ ë§ˆë ¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.'
                        ],
                        action: 'ìš´ì˜ ì „ëµì´ íƒ„íƒ„í•©ë‹ˆë‹¤. ì¸í—ˆê°€ ì™„ë£Œ í›„ ì¦‰ì‹œ ë³¸ê²© ìš´ì˜ì— ëŒì…í•  ìˆ˜ ìˆëŠ” ì¤€ë¹„ ìƒíƒœì…ë‹ˆë‹¤.'
                    },
                    mid: {
                        title: 'ë³´í†µ', range: '30~39ì ', color: '#D97706', bg: '#FFFBEB',
                        items: [
                            'í•µì‹¬ ì¸ë ¥ í™•ë³´ ê³„íšì€ ìˆìœ¼ë‚˜, êµ¬ì²´ì ì¸ ì±„ìš© ì¼ì •ê³¼ êµìœ¡ í”„ë¡œê·¸ë¨ì„ ìˆ˜ë¦½í•˜ì„¸ìš”.',
                            'GMP ê·œì • ìˆ™ì§€ë¥¼ ìœ„í•œ ë””ì§€í„¸ ë§¤ë‰´ì–¼ ë„ì…ì„ ì ê·¹ ê²€í† í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.',
                            'í™˜ì ì‚¬í›„ ê´€ë¦¬ ë° ì¥ê¸° ëª¨ë‹ˆí„°ë§ í”„ë¡œì„¸ìŠ¤ë¥¼ ì²´ê³„í™”í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.',
                            'ë¸Œëœë”©ê³¼ ë§ˆì¼€íŒ… ì±„ë„ ë‹¤ë³€í™”ë¥¼ í†µí•´ ì°¨ë³„í™”ëœ í¬ì§€ì…”ë‹ì„ êµ¬ì¶•í•˜ì„¸ìš”.'
                        ],
                        action: 'ìš´ì˜ ì²´ê³„ì˜ ë¶€ë¶„ ë³´ì™„ìœ¼ë¡œ ì¶©ë¶„íˆ ê²½ìŸë ¥ì„ í™•ë³´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¸í—ˆê°€ ì¤€ë¹„ì™€ ë³‘í–‰í•˜ì—¬ íŒ€ë¹Œë”©ì„ ê°•í™”í•˜ì„¸ìš”.'
                    },
                    low: {
                        title: 'ë¯¸í¡', range: '10~29ì ', color: '#DC2626', bg: '#FEF2F2',
                        items: [
                            'ë²•ì • í•„ìˆ˜ ì¸ë ¥ í™•ë³´ê°€ ë¯¸ë¹„í•˜ì—¬ ì¸í—ˆê°€ ì‹ ì²­ ìì²´ê°€ ë¶ˆê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                            'ì¬ìƒì˜ë£Œì— ëŒ€í•œ ê²½ì˜ ì² í•™ê³¼ ì¥ê¸° ë¹„ì „ ìˆ˜ë¦½ì´ ì‹œê¸‰í•©ë‹ˆë‹¤.',
                            'ì§ì› êµìœ¡ ì²´ê³„, SOP, í’ˆì§ˆê´€ë¦¬ ì‹œìŠ¤í…œì´ ì „ë¬´í•œ ìƒíƒœì…ë‹ˆë‹¤.',
                            'í™˜ì ê´€ë¦¬ í”„ë¡œì„¸ìŠ¤ì™€ ë¸Œëœë”© ì „ëµì„ ê·¼ë³¸ë¶€í„° ì¬ì„¤ê³„í•´ì•¼ í•©ë‹ˆë‹¤.'
                        ],
                        action: 'ìš´ì˜ ê¸°ë°˜ì´ ë§¤ìš° ì·¨ì•½í•©ë‹ˆë‹¤. ì‹œì„¤ íˆ¬ì ì „ ì¸ë ¥ í™•ë³´ì™€ ìš´ì˜ ì „ëµ ìˆ˜ë¦½ì„ ìµœìš°ì„ ìœ¼ë¡œ ì§„í–‰í•˜ì„¸ìš”.'
                    }
                }
            };

            function renderFeedback(partKey, feedbackId, score) {
                var fb;
                if (score >= 40) fb = expertFeedback[partKey].high;
                else if (score >= 30) fb = expertFeedback[partKey].mid;
                else fb = expertFeedback[partKey].low;

                var html = '<div class="feedback-box" style="border-left-color:' + fb.color + '; background:' + fb.bg + '">';
                html += '<div class="feedback-header">';
                html += '<span class="feedback-badge" style="background:' + fb.color + '">' + fb.title + '</span>';
                html += '<span class="feedback-title" style="color:' + fb.color + '">' + fb.range + '</span>';
                html += '</div>';
                html += '<ul class="feedback-list">';
                fb.items.forEach(function(item) {
                    html += '<li style="color:' + fb.color + '"><span style="color:#374151">' + item + '</span></li>';
                });
                html += '</ul>';
                html += '<div class="feedback-action">';
                html += '<span class="feedback-action-icon">ğŸ’¡</span>';
                html += '<div><strong>ê¶Œê³ ì‚¬í•­</strong><br>' + fb.action + '</div>';
                html += '</div>';
                html += '</div>';
                document.getElementById(feedbackId).innerHTML = html;
            }

            var segColors = ['#E17055', '#FDCB6E', '#F6E05E', '#48BB78', '#004DA6'];
            var segLabels = ['10', '20', '30', '40', '50'];

            function setPartBar(id, score, commentId, partKey, feedbackId) {
                var barPct = (score / 50) * 100;
                var container = document.getElementById(id);
                var html = '';
                for (var s = 0; s < 5; s++) {
                    var segMin = s * 10;
                    var segMax = (s + 1) * 10;
                    var fill;
                    if (score >= segMax) fill = 100;
                    else if (score > segMin) fill = ((score - segMin) / 10) * 100;
                    else fill = 0;
                    html += '<div class="seg"><div class="seg-fill" data-w="' + fill + '" style="background:' + segColors[s] + '"></div><span class="seg-label">' + segLabels[s] + '</span></div>';
                }
                container.innerHTML = html;
                setTimeout(function() {
                    container.querySelectorAll('.seg-fill').forEach(function(el) {
                        el.style.width = el.getAttribute('data-w') + '%';
                    });
                }, 300);
                document.getElementById(id.replace('Bar', 'Score')).textContent = score + '/50';

                var cEl = document.getElementById(commentId);
                if (barPct >= 80) cEl.textContent = 'ìš°ìˆ˜í•œ ìˆ˜ì¤€ì…ë‹ˆë‹¤. í˜„ì¬ ìƒíƒœë¥¼ ìœ ì§€í•˜ë©´ì„œ ì¶”ì§„í•˜ì„¸ìš”.';
                else if (barPct >= 60) cEl.textContent = 'ì–‘í˜¸í•˜ë‚˜ ì¼ë¶€ í•­ëª©ì˜ ë³´ì™„ì´ í•„ìš”í•©ë‹ˆë‹¤.';
                else cEl.textContent = 'ì§‘ì¤‘ì ì¸ ê°œì„ ì´ í•„ìš”í•œ ì˜ì—­ì…ë‹ˆë‹¤. ì „ë¬¸ê°€ ìƒë‹´ì„ ê¶Œì¥í•©ë‹ˆë‹¤.';

                renderFeedback(partKey, feedbackId, score);
            }

            setTimeout(function() {
                setPartBar('part1Bar', scores.p1, 'part1Comment', 'p1', 'part1Feedback');
                setPartBar('part2Bar', scores.p2, 'part2Comment', 'p2', 'part2Feedback');
                setPartBar('part3Bar', scores.p3, 'part3Comment', 'p3', 'part3Feedback');
            }, 400);

            // ë ˆì´ë” ì°¨íŠ¸
            var sampleRadarVals = radarVals || [8, 7, 6, 14, 11, 17, 7, 8, 15, 14];
            setTimeout(function() { drawRadar(sampleRadarVals); }, 300);

            function drawRadar(vals) {
                var svg = document.getElementById('radarChart');
                var ns = 'http://www.w3.org/2000/svg';
                svg.innerHTML = '';

                var cx = 200, cy = 180, maxR = 140;
                var labels = [
                    { name: 'ì†Œë“/ê³ ê°ì¸µ', sub: '(Q1-Q2)' },
                    { name: 'ì¸í”„ë¼/ì ‘ê·¼ì„±', sub: '(Q3-Q4)' },
                    { name: 'ê²½ìŸ/ë‹¨ê°€', sub: '(Q5-Q6)' },
                    { name: 'í™˜ê²½/ë§ˆì¼€íŒ…', sub: '(Q7-Q10)' },
                    { name: 'ì‹œì„¤ êµ¬ì¡°', sub: '(Q11-Q13)' },
                    { name: 'ì„¤ë¹„/ì•ˆì „', sub: '(Q14-Q18)' },
                    { name: 'ë³´ì•ˆ/íŒ¨ìŠ¤ë°•ìŠ¤', sub: '(Q19-Q20)' },
                    { name: 'ì¸ë ¥/ë¹„ì „', sub: '(Q21-Q22)' },
                    { name: 'AI/SOP', sub: '(Q23-Q26)' },
                    { name: 'ë¸Œëœë”©/ì»¤ë®¤ë‹ˆí‹°', sub: '(Q27-Q30)' }
                ];
                var n = labels.length;
                var maxVals = [10, 10, 10, 20, 15, 25, 10, 10, 20, 20];

                function polarToXY(angle, r) {
                    var a = angle - Math.PI / 2;
                    return { x: cx + r * Math.cos(a), y: cy + r * Math.sin(a) };
                }

                // ë°°ê²½ ê·¸ë¦¬ë“œ
                for (var lv = 1; lv <= 5; lv++) {
                    var r = maxR * lv / 5;
                    var pts = [];
                    for (var i = 0; i < n; i++) {
                        var p = polarToXY(2 * Math.PI * i / n, r);
                        pts.push(p.x + ',' + p.y);
                    }
                    var poly = document.createElementNS(ns, 'polygon');
                    poly.setAttribute('points', pts.join(' '));
                    poly.setAttribute('fill', lv % 2 === 0 ? 'rgba(0,77,166,0.02)' : 'none');
                    poly.setAttribute('stroke', '#E2E8F0');
                    poly.setAttribute('stroke-width', lv === 5 ? '2' : '0.5');
                    svg.appendChild(poly);
                }

                // ì¶•ì„ 
                for (var i = 0; i < n; i++) {
                    var p = polarToXY(2 * Math.PI * i / n, maxR);
                    var line = document.createElementNS(ns, 'line');
                    line.setAttribute('x1', cx);
                    line.setAttribute('y1', cy);
                    line.setAttribute('x2', p.x);
                    line.setAttribute('y2', p.y);
                    line.setAttribute('stroke', '#E2E8F0');
                    line.setAttribute('stroke-width', '0.5');
                    svg.appendChild(line);
                }

                // ë°ì´í„° í´ë¦¬ê³¤
                var dataPts = [];
                for (var i = 0; i < n; i++) {
                    var ratio = vals[i] / maxVals[i];
                    var p = polarToXY(2 * Math.PI * i / n, maxR * ratio);
                    dataPts.push(p.x + ',' + p.y);
                }
                var dataPoly = document.createElementNS(ns, 'polygon');
                dataPoly.setAttribute('points', dataPts.join(' '));
                dataPoly.setAttribute('fill', 'rgba(0, 77, 166, 0.15)');
                dataPoly.setAttribute('stroke', '#004DA6');
                dataPoly.setAttribute('stroke-width', '2.5');
                dataPoly.setAttribute('stroke-linejoin', 'round');
                dataPoly.style.opacity = '0';
                dataPoly.style.transition = 'opacity 1.2s ease';
                svg.appendChild(dataPoly);
                setTimeout(function() { dataPoly.style.opacity = '1'; }, 200);

                // ë°ì´í„° í¬ì¸íŠ¸
                for (var i = 0; i < n; i++) {
                    var ratio = vals[i] / maxVals[i];
                    var p = polarToXY(2 * Math.PI * i / n, maxR * ratio);
                    var dot = document.createElementNS(ns, 'circle');
                    dot.setAttribute('cx', p.x);
                    dot.setAttribute('cy', p.y);
                    dot.setAttribute('r', '5');
                    dot.setAttribute('fill', '#004DA6');
                    dot.setAttribute('stroke', '#FFFFFF');
                    dot.setAttribute('stroke-width', '2.5');
                    svg.appendChild(dot);
                }

                // ë¼ë²¨
                for (var i = 0; i < n; i++) {
                    var angle = 2 * Math.PI * i / n;
                    var lp = polarToXY(angle, maxR + 30);
                    var text = document.createElementNS(ns, 'text');
                    text.setAttribute('x', lp.x);
                    text.setAttribute('y', lp.y);
                    text.setAttribute('text-anchor', 'middle');
                    text.setAttribute('dominant-baseline', 'middle');
                    text.setAttribute('font-size', '11');
                    text.setAttribute('font-weight', '600');
                    text.setAttribute('fill', '#374151');

                    var tspan1 = document.createElementNS(ns, 'tspan');
                    tspan1.setAttribute('x', lp.x);
                    tspan1.setAttribute('dy', '0');
                    tspan1.textContent = labels[i].name;
                    text.appendChild(tspan1);

                    var pctVal = Math.round((vals[i] / maxVals[i]) * 100);
                    var tspan2 = document.createElementNS(ns, 'tspan');
                    tspan2.setAttribute('x', lp.x);
                    tspan2.setAttribute('dy', '15');
                    tspan2.setAttribute('font-size', '11');
                    tspan2.setAttribute('font-weight', '800');
                    tspan2.setAttribute('fill', pctVal >= 80 ? '#059669' : pctVal >= 60 ? '#D97706' : '#DC2626');
                    tspan2.textContent = pctVal + '%';
                    text.appendChild(tspan2);

                    svg.appendChild(text);
                }
            }
        } // end renderPage

        // Supabaseì—ì„œ ë°ì´í„° ë¡œë“œ or ìƒ˜í”Œ í‘œì‹œ
        if (recordId !== null) {
            supabaseFetchDiagnosisById(parseInt(recordId)).then(function(rec) {
                if (rec) {
                    renderPage(
                        rec.pct,
                        { p1: rec.scores_p1, p2: rec.scores_p2, p3: rec.scores_p3 },
                        rec.radar_vals,
                        { name: rec.name, position: rec.position, phone: rec.phone, email: rec.email, hospital: rec.hospital, location: rec.location, note: rec.note },
                        true,
                        rec.id
                    );
                } else {
                    renderSample();
                }
            }).catch(function() { renderSample(); });
        } else {
            renderSample();
        }

        function renderSample() {
            renderPage(74, { p1: 39, p2: 34, p3: 38 }, [8,7,6,14,11,17,7,8,15,14], {
                name: 'ê¹€ì¬ì›', position: 'ëŒ€í‘œì›ì¥', phone: '010-9876-5432',
                email: 'jwkim@gangnam-clinic.co.kr', hospital: 'ê°•ë‚¨ì²¨ë‹¨ì¬ìƒì˜ë£Œì˜ì›',
                location: 'ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ', note: 'ì¤„ê¸°ì„¸í¬ ì¹˜ë£Œ ì¤‘ì‹¬ì˜ í”„ë¦¬ë¯¸ì—„ í´ë¦¬ë‹‰ ê°œì›ì„ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤. ì‹œì„¤ ì„¤ê³„ë¶€í„° ì¸í—ˆê°€ê¹Œì§€ ì›ìŠ¤í†± ì»¨ì„¤íŒ…ì„ í¬ë§í•©ë‹ˆë‹¤.'
            }, false, 0);
        }
    })();
    </script>
    <!-- ë¦¬ì  ë©”ë“œAIìƒë‹´í†¡ -->
    <button class="ai-chat-btn" onclick="document.getElementById('aiChatPanel').classList.toggle('open')">ë¦¬ì  ë©”ë“œAIìƒë‹´í†¡</button>
    <div class="ai-chat-panel" id="aiChatPanel">
        <div class="ai-chat-header">
            <span>ë¦¬ì  ë©”ë“œAIìƒë‹´í†¡</span>
            <button class="ai-chat-close" onclick="document.getElementById('aiChatPanel').classList.remove('open')">&times;</button>
        </div>
        <iframe src="https://aitalker.co.kr/biz020" class="ai-chat-iframe"></iframe>
    </div>
    <style>
        .ai-chat-btn {
            position: fixed;
            bottom: 24px;
            right: 24px;
            background: linear-gradient(135deg, #0066CC, #00B894);
            color: #fff;
            font-size: 15px;
            font-weight: 700;
            padding: 14px 28px;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            box-shadow: 0 6px 24px rgba(0,102,204,0.4);
            z-index: 9999;
            transition: all 0.3s;
            font-family: var(--font-primary);
        }
        .ai-chat-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 32px rgba(0,102,204,0.5);
        }
        .ai-chat-panel {
            position: fixed;
            bottom: 80px;
            right: 24px;
            width: 400px;
            height: 600px;
            background: #fff;
            border-radius: 20px;
            box-shadow: 0 12px 48px rgba(0,0,0,0.2);
            z-index: 10000;
            display: none;
            flex-direction: column;
            overflow: hidden;
        }
        .ai-chat-panel.open { display: flex; }
        .ai-chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px 20px;
            background: linear-gradient(135deg, #0066CC, #00B894);
            color: #fff;
            font-size: 15px;
            font-weight: 700;
        }
        .ai-chat-close {
            background: none;
            border: none;
            color: #fff;
            font-size: 24px;
            cursor: pointer;
            line-height: 1;
        }
        .ai-chat-iframe {
            flex: 1;
            width: 100%;
            border: none;
        }
        @media (max-width: 480px) {
            .ai-chat-panel {
                width: calc(100vw - 32px);
                height: calc(100vh - 120px);
                right: 16px;
                bottom: 72px;
            }
        }
    </style>
</body>
</html>
